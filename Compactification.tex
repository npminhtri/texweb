\documentclass[12pt]{article} % \documentclass{} is the first command in any LaTeX code.  It is used to define what kind of document you are creating such as an article or a book, and begins the document preamble

\usepackage{amsmath} % \usepackage is a command that allows you to add functionality to your LaTeX code

\usepackage[papersize={216mm,330mm},tmargin=20mm,bmargin=20mm,lmargin=20mm,rmargin=20mm]{geometry}
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{amsmath,amssymb,mathabx,amsthm}%\for eqref
\usepackage{faktor}
\usepackage{lscape}
\usepackage{graphicx}
\usepackage[colorinlistoftodos]{todonotes}
\usepackage{fancyhdr}
\usepackage{hyperref} %creat hyperlink
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
    pdftitle={Overleaf Example},
    pdfpagemode=FullScreen,
    } %set up a hyperlink to be in blue 
\newtheorem{theorem}{Theorem}
\newtheorem{definition}{Definition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\DeclareMathOperator{\pj1}{\mathbb{P}^1(\mathbb{Q})}
\DeclareMathOperator{\sl2}{SL_2(\mathbb{Z})}
\DeclareMathOperator{\so2}{SO_2(\mathbb{R})}

\DeclareMathOperator{\uph}{\mathbb{H}}

\pagestyle{plain}
\renewcommand{\baselinestretch}{1.2} % increase the distance between line.
\setlength\parindent{0pt} % noindent for the whole file.

\title{Compactification in low dimension} % Sets article title
\author{Tri Nguyen - University of Alberta} % Sets authors name
\date{\today} % Sets date for date compiled

% The preamble ends with the command
\begin{document}
\maketitle % creates a title using the information in the preamble (title, author, date)
In this expository note, I will try to explain explicitly how to compactify $\Gamma\backslash \mathbb{H}$ by adding points in two ways.
\section{Some preparations}
We will always denote $\Gamma$ a subgroup of the group $SL_2(\mathbb{Z})$ of finite index, and this group acts on
the upper half complex plane $\mathbb{H}$ by
\[\begin{bmatrix}
        a & b \\
        c & d
    \end{bmatrix} \circ z := \dfrac{az+b}{cz+d} \]
When $z$ tends to infinity, we have
\[\lim_{z \to \infty} \dfrac{az+b}{cz+d}= \frac{a}{c},\]
so we add the rational line to define the action of this group at $\infty$. In particular, we consider the set
\[\overline{\mathbb{H}} = \mathbb{H} \cup \mathbb{P}^1(\mathbb{Q})\]
Note that on the projective rational line, we define the action to be the multiplication of a $2 \times 2$ matrix with a $2\times 1$ vector.
Then under this action, we have the following lemma
\begin{lemma}
    $SL_2(\mathbb{Z})$ acts transitively on $\mathbb{P}^1(\mathbb{Q})$.
\end{lemma}
\begin{proof}
    For each point in $\pj1$, we can choose the representative to be of the form $[a:b]$, where
    $\gcd(a,b)=1$. Then there exists $x,y \in \mathbb{Z}$ such that
    \[ax - by = 1\]
    Thus we get the following equality
    \[ \begin{bmatrix}
            b  & a \\
            -x & y \\
        \end{bmatrix}\begin{bmatrix}
            a \\
            b
        \end{bmatrix} = \begin{bmatrix}
            0 \\
            1
        \end{bmatrix}\]
    This implies any points in $\pj1$ can be moved to $[0:1]$, and thus the action is transitive.
\end{proof}

\begin{corollary}\label{cor2}
    If $\Gamma$ is a subgroup of finite index in $\sl2$ then $\Gamma \backslash \pj1$ has only finite orbits.
\end{corollary}
\section{Compactification of $\Gamma \backslash \mathbb{H}$ by adding points.}
We introduce a topology on $\overline{\mathbb{H}}$. For the usual upper half plane, the topology is the usual metric
topology on $\mathbb{C}$, and we only define the system of the neighborhood of $r \in \pj1$.

Let $S(c, \omega)$ be the circle that touches the real line at $\omega = p/q$ and has the radius $\frac{c}{2q^2}$.
Then the collection of circles $D(c,\omega ) = \bigcup_{0<c' \le c} S(c',\omega)$ is called \textit{Farey disk}. Let $c \to 0$, these disks
define a neighborhood of $\omega$. The Farey disks at $\infty$ are defined to be the region
\[ D(T,\infty ) = \left\lbrace z: \Im z \ge T \right\rbrace\]
It can be checked easily that the matrix under inversion, the Farey disk at $\infty$ is mapped
to $D(1/T,0)$. In general, if $\gamma \in \sl2$ such that $\gamma \circ \infty = \omega$ then $D(T,\infty)$ is mapped to
$D(1/T, \omega)$.

With the above topology on the extended upper half plane, we could show that
\begin{lemma}
    $\Gamma \backslash \mathbb{\overline{H}}$ is a compact set.
\end{lemma}
The proof is taken from \cite{modf} and I rewrite it here for completeness.
\begin{proof}
    We first prove for the case $\Gamma = \sl2$. It is well known that the  quotient space
    $\Gamma \backslash \mathbb{H}$ is identical to the set
    \[\mathcal{F} = \left\lbrace z \in \mathbb{H}: \Re z \in [-1/2,1/2), |z| \ge 1  \text{ and } |z|>1 \text{ if } \Re z > 0 \right\rbrace\]
    By lemma 1, the projective rational line "shrinks" to a point under the action of $\Gamma = \sl2$,
    Thus we can identify $\Gamma \backslash  \mathbb{\overline{H}}$ with the set $\tilde{\mathcal{F}} =\mathcal{F} \cup \left\lbrace \infty \right\rbrace$. Consider an open cover $\left\lbrace U_i\right\rbrace_{i \in I}$ of
    $\tilde{\mathcal{F}}$ and the natural projection $ \pi \colon \mathbb{\overline{H}} \to \mathbb{\tilde{F}}$. Then the set $\left\lbrace \pi^{-1}(U_i)\right\rbrace_{i \in I}$ forms
    an open cover of $\mathbb{\overline{H}}$. There must be an index $i_0$ such that $\pi^{-1}(U_{i_0})$ contains a neighborhood of $\infty$, namely contains a Farey disk $D(T,\infty)$ for some $T>0$.
    Since $\overline{\mathcal{F}} - D(T,\infty)$ is a compact set, its image under $\pi$ is compact, hence it can be covered by $U_{i_1},\ldots, U_{i_m}$. Altogether, $\tilde{\mathcal{F}}$
    admits a finite subcover $U_{i_0}, \ldots, U_{i_m}$.

    Now we proceed to the general case. Note that
    \[ \overline{\mathbb{H}} = \sl2 \circ \tilde{\mathcal{F}} = \bigcup \Gamma a_i \circ \tilde{\mathcal{F}} \]
    by corollary \ref{cor2}. Then under the surjective map $ \pi \colon \overline{\mathbb{H}} \to \Gamma \backslash \overline{\mathbb{H}}$, we have
    \[ \Gamma \backslash \overline{\mathbb{H}} = \bigcup \pi\left(\Gamma a_i \circ \tilde{\mathcal{F}}\right),\]
    which shows that the set $Y(\Gamma) = \Gamma\backslash \mathbb{\overline{H}}$ is compact as it is the union of compact sets.
\end{proof}
The orbit of $\pj1$ under the action of $\Gamma$ is called \textit{ cusps}. We have the obvious equality that
\[ \Gamma\backslash \mathbb{\overline{H}} = \Gamma \backslash \mathbb{H} \cup  \underbrace{\Gamma \backslash \pj1}_{\text{ cusps}}\]
So in fact lemma 3 tells us that we only need to add a finite cusp to get a compact domain. That means we only need to consider the actions of
$\Gamma$ on the projective rational line. By the orbit-stabilizer theorem, we get the decomposition
\[ \Gamma \backslash \bigcup_\omega D(c,\omega) = \bigcup \Gamma_{\omega_i} \backslash D(c,\omega_i)\]
where $\omega_i$ is the set of representative for the action of $\Gamma$ on $\pj1$ and $\Gamma_{\omega_i}$ are the stabilizer of $\omega_i \in \Gamma$.

Again, since the action of $\sl2$ on $\pj1$ is transitive, for each $r \in \pj1$, there exists an element
$\gamma \in \sl2$ such that $\gamma \circ \infty = r$. So we have $\Gamma_r = \gamma \Gamma_\infty \gamma^{-1}$. Hence we only need to know the "shape" of the domain
$\Gamma_\infty \backslash D(T,\infty)$. WLOG, we could assume $\Gamma = \sl2$, and hence
\[ \Gamma_\infty = \left\lbrace \begin{bmatrix}
        1 & n \\
        0 & 1
    \end{bmatrix}: n \in \mathbb{Z}\right\rbrace\]
Geometrically, $\Gamma_\infty\backslash D(T,\infty)$ is the strip $\left\lbrace \Re z \in [-1/2,1/2), \Im z \ge T \right\rbrace$. But this is biholomorphic to a closed disk that misses a point on the boundary.
            So compactification is obtained by filling in the missing points to get finitely many compact disks.

            \section{Borel - Serre compactification of $\sl2 \backslash \mathbb{H}$}
            We consider another compactification, by looking at the Farey disk $D(c,\omega)$ for fixed parameters
        $c,\omega$. Then for any points $y \ne \omega$ on the Farey circle $S(c,\omega)$, we could connect $y$ with $\omega$
            by a unique geodesic in the upper half-plane.

            These geodesics are either upper half circles that are orthogonal to the real line or the vertical line passing through $\omega$.
        We thus can identify the Farey disks as follows
        \[ D(c,\omega) - \left\lbrace \omega \right\rbrace = X_{\infty, \omega} \times (0,c],\]
    since a point $\theta$ on the Farey circles $S(c,\omega)$ is defined by its radius, up to a scaling of $c$, and the intersection of the geodesic $\overline{\theta\omega}$ with the real line. The uniqueness of the geodesics
    gives us a bijection between two sets. Here we let $X_{\infty,\omega} = \mathbb{P}^1(\mathbb{R}) - \left\lbrace \omega \right\rbrace$


    How does the group $\Gamma$ act on the set on the RHS set in the above identification? First, we look at the special case where
$\omega = \infty$. In this case, the identification is
    \[ D(T,\infty) - \infty = X_{\infty,\infty} \times [T,\infty)\]
    On the left, stabilizer subgroup $\Gamma_\infty$ can be thought of as a subgroup of the group of translation,
    which leaves all the Farey circles $S(t,\infty)$ - which are the line $\left\lbrace \Im z = t \ge T \right\rbrace$ in this case - intact.
    Thus on the right-hand side, the action of $\Gamma_\infty$ only affects the first coordinate.
    In general case, we need a lemma
    \begin{lemma}\label{l4}
        If $\gamma \in \sl2$ such that $\gamma \circ \infty = \omega$ then $\gamma \circ D(T,\infty) = D(1/T, \omega)$.
    \end{lemma}
    Assume lemma \ref{l4} with the note that $\Gamma_\omega = \gamma \Gamma_\infty \gamma^{-1}$, we conclude that the action of $\Gamma_\omega$ only affects $X_{\infty,\omega}$ for
    all $\omega \in \pj1$. Since $\Gamma_\omega \backslash X_{\infty,\omega}$ is a circle, it is compact. Hence we can compactify the quotient space
$\Gamma_\omega \backslash D(c,\omega) - \left\lbrace \omega\right\rbrace $ as
    \[\Gamma_\omega \backslash D(c,\omega) - \left\lbrace \omega\right\rbrace \hookrightarrow \Gamma_\omega \backslash X_{\infty,\omega } \times [0,c]\]

    As in section 1, we only need to compactify finitely many such quotient spaces and get the compactification of $\Gamma\backslash \mathbb{H}$.

    Now we give a proof of lemma \ref{l4}
    \begin{proof}
        Assume $\gamma \in \sl2$ is an element that sends $\infty$ to $\omega = \frac{p}{q}$. Let $\gamma = \begin{bmatrix}
                a & b \\
                c & d \\
            \end{bmatrix}$ then
        \[\begin{bmatrix}
                a & b \\
                c & d \\
            \end{bmatrix}\begin{bmatrix}
                1 \\
                0
            \end{bmatrix} = \begin{bmatrix}
                p \\
                q
            \end{bmatrix}.\]
        Thus we must have $a = p, c=q$ and $b,c$ are integers such that $aq-cp=1$. A Farey circle in the neighborhood of
        $\infty$ is, in fact, a line $S(T,\infty) = \left\lbrace \Im z = T\right\rbrace$, and this line is mapped to a circle tangent to the real line.
        Direct calculation shows that, for $z = x+iT$
        \[\Im(\gamma \circ z )= \dfrac{\Im z}{|cz+d|^2} = \dfrac{T}{(cx+d)^2+c^2T^2} \le \dfrac{1}{q^2T} \]
        The equality happens if $x = -d/c$. Since this $\gamma \circ z$ is a point on the circle tangent to the real line at $p/q$ and has the largest distance to the real line, the segment connect $p/q$ and $\gamma \circ z$ must be the diameter of the image circle.
        In particular, the radius of the image circle is $\frac{1}{2Tq^2}$. Lemma \ref{l4} follows immediately.
    \end{proof}
    The above process can be applied to finitely many Fareye disks as in section 2 to get a compactification of $\Gamma \backslash \mathbb{H}$.

    \newpage

    \section{Equivalent definitions of semi-stability}
    In this section, we give two definitions of semi-stability in $\uph$, and show that
    they are essentially the same. We will also compute the semi-stable locus in $\uph$.

    We first introduce some terminology: for each complex number $z \in \uph$, we assign to it a lattice in $\mathbb{C}$,where the lattice is spanned by two vectors $\left\lbrace z,1 \right\rbrace$. By identifying $\mathbb{C} \cong \mathbb{R}^2$,
    we can compute the volume of the fundamental domain given by this lattice is $y = \Im(z)$. Then we scale two vectors in the basis to get a unit lattice.

    Following this process, each $z \in \uph$ is assigned with a unique unit lattice, namely $\Gamma_z = \text{span}_\mathbb{Z}\left\lbrace a, z/a\right\rbrace$, where $a = \Im(z)$. Now we are ready to define semi-stability.
    Furthermore, to each lattice, we assigned to it a plot in the following way:
    \begin{itemize}
        \item We start with the point $(0,0)$ in the plane.
        \item Let $u$ be the shortest vector in the lattice $\Gamma_z$, we highlight the point $(1,\log|u|)$ in the plane.
        \item Finally, we attached the point $(2,\log(vol(A)))$, where $A$ is the fundamental domain of $\Gamma_z$.
        \item We connect consecutive points by line segments. The union of these line segments is called \textit{profile} of the lattice.
    \end{itemize}
    In our setting, since we already normalize all lattices to unit lattice, the final point is in fact $(2,0)$.
    \begin{definition}
        The lattice assigned to the number $z \in \uph$ is call semi-stable if and only if the point $(1,\log|u|)$ lies above the $x$-axis.
    \end{definition}
    Before giving the second definition of semi-stablility, we will try to find the semi-stable locus using this definition.
    First, we restrict our attention to the fundamental domain
    \[\mathcal{F} = \left\lbrace z \in \mathbb{H}: \Re z \in [-1/2,1/2), |z| \ge 1  \text{ and } |z|>1 \text{ if } \Re z > 0 \right\rbrace\]
    For each point $z \in \mathcal{F}$, it is easily to see that the shortest vector in the corresponding lattice is $a$.
    Thus the 1-dim point is $(1,\log(a))=(1,-\log(y)/2)$. By definition, $\Gamma_z$ is semi-stable iff $\log(y)\le 0$, i.e. $y \ge 1$.
    To find the semi-stable locus in the whole upper half plane, we need the following result
    \begin{lemma}
        If $\Gamma_z$ is semi-stable, then so is the lattice $\Gamma_{g \circ z}$, where $g \in \sl2$.
    \end{lemma}
    \begin{proof}
        If we denote $L_z=\text{span}_\mathbb{Z}\left\lbrace 1,z\right\rbrace$, then $L_{\gamma\circ z} = cL_z$ for some complex number $c$.
        Indeed, we just need to check for $\gamma$ be an inversion or translation, since these two transformations generate $\sl2$, but this is easy.
        Now let $c = re^{it}$. Multiplying by $e^{it}$ doesn't change the length, hence doesn't change the semi-stability. Multiplying by a positive number
        $r$ will shift $(1,\log|u|)$ to $(1,\log|u|+\log r)$ and $(2,\log(vol(A)))$ to $(2,\log(vol(A))+2\log r)$.
        \textcolor{red}{I think in 2 dimensional case, c is 1}

        The line segment $d$ connecting origin with the final point intersect the line $x=1$ at $(1,\log(vol(A))+\log r)$. By the semi-stability of the original lattice
        the point $(1,\log|u|+\log r)$ is above the line segment $d$.
    \end{proof}
    From this lemma, we could see that the semi-stable locus is the complement of the Farey balls in the upper half plane.

    Now we give the second definition of semi-stability. First we note that $\uph$ can be identified
    with the set $\text{SL}_2(\mathbb{R})/\so2$. Using Iwasawa's decomposition, we could identify $z = x+iy$
    with the pair $(a(z),n(z))$ where
    \[a(z) = \begin{bmatrix}
            y^{-1/2} & 0       \\ ,
            0        & y^{1/2}
        \end{bmatrix} \quad n(z) = \begin{bmatrix}
            1 & x \\
            0 & 1
        \end{bmatrix}\]
    Then we can define a map
    \[H_B \colon  \uph \to \mathfrak{sl}_2, \quad z \mapsto \log(a(z))H,\]
    where $H= \begin{bmatrix}
    1 & 0  \\
    0 & -1
\end{bmatrix}$. Then we define a unique linear map $\alpha \colon \mathbb{R}H\to \mathbb{C}$ such that $\alpha(H)=2$. Set
$\rho = \alpha/2$. For each $T = -kH$ where $k>0$, we define the degree of instability of $x \in \text{SL}_2(\mathbb{R})/\so2$
    as follows
    \[\deg_\text{inst}^T(x):= \min_{\gamma \in \Gamma/\Gamma \cap B}\left\langle \rho, H_B(x\gamma )-T\right\rangle \]
    In this particular case, the RHS of the above definition can be simplified as
    \[\deg_\text{inst}^T(x) = \min_{\gamma \in \Gamma}\log(a(x\gamma)+k)\]
    For the case $k=0$, the point $x$ is call semi-stable iff $\deg_\text{inst}^T(x) \ge 0$. Since the minimum
    is always achieved, this implies $\frac{-1}{2}\log(\Im(x\gamma)) \ge 0 $, i.e. $\Im(x\gamma) \le 1$ for all $\gamma$.

    A key observation is that the minimum of $a(z)$ is achieved inside the Siegel's set, which is exactly the fundamental domain $\mathcal{F}$ in this case. This implies the semi-stable locus inside the fudamental domain
    is the intersection of $\mathcal{F}$ with $\left\lbrace \Im(z)<1\right\rbrace$. So the semi-stable locus is the union of orbits who has a representative in this part.

\begin{thebibliography}{}
    \bibitem{modf}  Diamond, F., \& Shurman, J. M. (2005). A first course in modular forms (Vol. 228, pp. xvi-436). New York: Springer.
\end{thebibliography}


\end{document}
